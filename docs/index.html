<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Minecraft in Browser</title>
  <style>
    body, html { margin:0; padding:0; overflow:hidden; height:100%; }
    #lwjgl { width:100%; height:100%; display:block; }
  </style>
  <!-- suppress favicon 404 -->
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
</head>
<body>
  <canvas id="lwjgl"></canvas>

  <!-- 1) CheerpJ 4.0 loader -->
  <script src="https://cjrtnc.leaningtech.com/4.0/loader.js"></script>

  <!-- 2) LWJGL JNI stubs -->
  <script>
    window.org_lwjgl_opengl_WindowsDisplay_nCreateWindow      = (w,h) => 0;
    window.org_lwjgl_opengl_WindowsDisplay_nSetTitle         = ptr => {};
    window.org_lwjgl_opengl_WindowsDisplay_nDestroyWindow    = () => {};
    window.org_lwjgl_opengl_WindowsDisplay_nIsCloseRequested = () => 0;
    window.org_lwjgl_opengl_WindowsDisplay_nPumpMessages     = () => {};
    window.org_lwjgl_opengl_WindowsDisplay_nMakeCurrent      = () => {};
    window.org_lwjgl_opengl_WindowsDisplay_nSwapBuffers      = () => {};
    window.org_lwjgl_opengl_WindowsDisplay_nConfigureDisplay = () => 0;
  </script>

  <!-- 3) Launch logic -->
  <script>
    (async function(){
      if (typeof cheerpjInit !== 'function') {
        console.error('CheerpJ loader failed to define cheerpjInit().');
        return;
      }

      await cheerpjInit();
      const canvas = document.getElementById('lwjgl');
      cheerpjCreateDisplay(canvas.width, canvas.height);

      const manifest = await fetch('https://launchermeta.mojang.com/mc/game/version_manifest.json')
                               .then(r=>r.json());
      const latestId = manifest.latest.release;
      const info     = manifest.versions.find(v=>v.id===latestId);
      const version  = await fetch(info.url).then(r=>r.json());

      // â† relative path: no leading slash
      await cheerpjRunJar(
        'minecraft-client.jar',
        '--gameDir','/usergame',
        '--version', version.id,
        '--width',   canvas.width,
        '--height',  canvas.height,
        '--accessToken','00000000-0000-0000-0000-000000000000'
      );
    })().catch(e => console.error('Startup error:', e));
  </script>
</body>
</html>


      console.error('Startup error:', e);
    });
  </script>
</body>
</html>
